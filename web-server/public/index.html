<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>
      Pomelo
    </title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <meta http-equiv="content-style-type" content="text/css" />
    <meta http-equiv="content-scripte-type" content="text/javascript" />
    <meta name="author" content="netease" />
    <meta name="version" content="1.0" />
    <meta name="keywords" content="pomelo" />
    <link type="text/css" rel="stylesheet" href="css/base.css" />
    <script src="js/lib/build/build.js" type="text/javascript"></script>
    <script type="text/javascript">
      require('boot');
    </script> 
    <script type="text/javascript">
      var pomelo = window.pomelo;
      var host = "127.0.0.1";
      var port = "3010";
      
      var tripOrderNumber = null;

      function show() {
        pomelo.init({
          host: host,
          port: port,
          log: true
        }, function() {
            console.log('pomelo client 初始化成功')
        });
      }

      function entry() {
        pomelo.request("connector.entryHandler.entry", {token: '4d154fdb7080beb2e60d6c0bf62de9d9', nickName: '这个是昵称', avatarURL: '这个是头像url'}, function(data) {
              console.log(data);
          });
      }

      function show2() {
        pomelo.request("connector.entryHandler.loginByOtherPlatform", {code: '001w5vtH1VTnr80BZqsH128gtH1w5vt6', nickName: '这个是昵称', avatarURL: '这个是头像url'}, function(data) {
              console.log(data);
          });
      }

      function createTrip() {
        pomelo.request("trip.tripHandler.create", {}, function(data) {
              console.log(data);
              if (data.data.ordernumber) {
                tripOrderNumber = data.data.ordernumber;
              }
          });
      }

      function endTrip() {
        pomelo.request("trip.tripHandler.end", {}, function(data) {
              console.log(data);
          });
      }
      
      function queryUnfinished() {
        pomelo.request("trip.tripHandler.queryUnfinished", {}, function(data) {
              console.log(data);
              if (data.data.ordernumber) {
                tripOrderNumber = data.data.ordernumber;
              }
          });
      }

      function entryTripRoom() {
        pomelo.request("connector.entryHandler.entryTripRoom", {ordernumber: tripOrderNumber}, function(data) {
              console.log(data);
          });
      }
      
      function leaveTripRoom() {
        pomelo.request("connector.entryHandler.leaveTripRoom", {}, function(data) {
              console.log(data);
          });
      }
      
      function uploadLocation() {
        pomelo.request("trip.tripHandler.uploadLocation", {longitude: '经度', latitude: '纬度'}, function(data) {
              console.log(data);
          });
      }

      function tripSOS() {
        pomelo.request("trip.tripHandler.SOS", {}, function(data) {
              console.log(data);
          });
      }

      function getInfo() {
        pomelo.request("trip.tripHandler.getInfo", {ordernumber: tripOrderNumber}, function(data) {
              console.log(data);
          });
      }

      function getUserInfoInTripRoom() {
        pomelo.request("trip.tripHandler.getUserInfoInTripRoom", {}, function(data) {
              console.log(data);
          });
      }

      function follow() {
        pomelo.request("trip.tripHandler.follow", {}, function(data) {
              console.log(data);
          });
      }

      function unfollow() {
        pomelo.request("trip.tripHandler.unfollow", {}, function(data) {
              console.log(data);
          });
      }

    </script>
  </head>
  <body>
    <div class="g-doc">
      <div class="g-banner" style="border:none">
        <div class="logo">
          <div class="img"></div>
        </div>
      </div>
      <div class="g-background">
        <div class="g-content">
          Welcome to Pomelo
        </div>
      </div>
      <div class="g-link">
        Home:
        <a href="https://github.com/NetEase/pomelo">https://github.com/NetEase/pomelo</a>
      </div>
      <div class="g-button">
        <input id="test" type="button" value="Pomelo 初始化" onclick="show()"/>
        <input id="test" type="button" value="entry" onclick="entry()"/>
        <input id="test" type="button" value="第三方登录" onclick="show2()"/>
        <input id="test" type="button" value="创建行程" onclick="createTrip()"/>
        <input id="test" type="button" value="结束行程" onclick="endTrip()"/>
        <input id="test" type="button" value="查询未完成行程" onclick="queryUnfinished()"/>
        <input id="test" type="button" value="进入行程房间" onclick="entryTripRoom()"/>
        <input id="test" type="button" value="离开行程房间" onclick="leaveTripRoom()"/>
        <input id="test" type="button" value="上报当前位置" onclick="uploadLocation()"/>
        <input id="test" type="button" value="行程求救" onclick="tripSOS()"/>
        <input id="test" type="button" value="获取行程信息" onclick="getInfo()"/>
        <input id="test" type="button" value="获取行程房间内用户" onclick="getUserInfoInTripRoom()"/>
        <input id="test" type="button" value="关注房主" onclick="follow()"/>
        <input id="test" type="button" value="取消关注房主" onclick="unfollow()"/>
      </div>
    </div>
    <br>
  </body>
</html>
